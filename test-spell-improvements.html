<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Spell Improvements - Dofus Game</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        .info {
            background-color: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .changes {
            background-color: #0a4a0a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-steps {
            background-color: #4a4a0a;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        #game-container {
            border: 2px solid #444;
            border-radius: 8px;
            overflow: hidden;
        }
        .version {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: #444;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="version">v2.0 - Spell Improvements</div>
    
    <div class="info">
        <h2>üéØ Mejoras de Hechizos Implementadas</h2>
        <ul>
            <li><strong>Da√±o escalado por nivel:</strong> Los hechizos ahora hacen m√°s da√±o seg√∫n su nivel (20% por nivel)</li>
            <li><strong>UI mejorada:</strong> Botones muestran nivel del hechizo y estimaci√≥n de da√±o</li>
            <li><strong>Tooltips detallados:</strong> Hover sobre hechizos muestra informaci√≥n completa</li>
            <li><strong>Indicadores visuales:</strong> Informaci√≥n del hechizo seleccionado en el mapa</li>
            <li><strong>Da√±o flotante:</strong> N√∫meros de da√±o con colores por elemento</li>
        </ul>
    </div>

    <div class="changes">
        <h3>‚úÖ Cambios Aplicados</h3>
        <ul>
            <li>Todos los hechizos usan <code>getRandomScaledDamage()</code></li>
            <li>UI de hechizos refactorizada para usar <code>SpellUI</code> class</li>
            <li>Tooltips con informaci√≥n detallada de da√±o y caracter√≠sticas</li>
            <li>Estimaci√≥n de da√±o considerando bonos elementales</li>
            <li>Da√±o flotante con colores por elemento</li>
        </ul>
    </div>

    <div class="test-steps">
        <h3>üß™ Pasos para Probar</h3>
        <ol>
            <li><strong>Entra en combate</strong> desde el mapa de exploraci√≥n</li>
            <li><strong>Observa los botones de hechizos</strong> - deber√≠an mostrar nivel y da√±o estimado</li>
            <li><strong>Haz hover</strong> sobre un hechizo para ver el tooltip detallado</li>
            <li><strong>Selecciona un hechizo</strong> - ver√°s informaci√≥n mejorada sobre el jugador</li>
            <li><strong>Lanza un hechizo</strong> - observa el da√±o flotante con color elemental</li>
            <li><strong>Ve al modal de hechizos</strong> y sube el nivel de un hechizo</li>
            <li><strong>Regresa al combate</strong> y verifica que el da√±o estimado aument√≥</li>
        </ol>
    </div>

    <div id="game-container"></div>

    <script type="module">
        // Forzar recarga de m√≥dulos agregando timestamp
        const timestamp = Date.now();
        
        // Importar con cache busting
        const { default: Phaser } = await import(`./node_modules/phaser/dist/phaser.js?v=${timestamp}`);
        
        // Importar escenas con cache busting
        const modules = await Promise.all([
            import(`./src/scenes/AuthSceneHTML.js?v=${timestamp}`),
            import(`./src/scenes/CharacterSelectionScene.js?v=${timestamp}`),
            import(`./src/scenes/CharacterCreationScene.js?v=${timestamp}`),
            import(`./src/scenes/ExplorationMap.js?v=${timestamp}`),
            import(`./src/scenes/IsometricMap.js?v=${timestamp}`),
            import(`./src/scenes/CharacteristicsScene.js?v=${timestamp}`)
        ]);

        const [
            { AuthSceneHTML },
            { CharacterSelectionScene },
            { CharacterCreationScene },
            { ExplorationMap },
            { IsometricMap },
            { CharacteristicsScene }
        ] = modules;

        const config = {
            type: Phaser.AUTO,
            width: 1280,
            height: 720,
            backgroundColor: '#000000',
            pixelArt: true,
            parent: 'game-container',
            scene: [AuthSceneHTML, CharacterSelectionScene, CharacterCreationScene, 
                ExplorationMap, IsometricMap, CharacteristicsScene],
            physics: {
                default: 'arcade',
                arcade: {
                    debug: false
                }
            }
        };

        const game = new Phaser.Game(config);
        
        console.log('üéÆ Juego iniciado con mejoras de hechizos v2.0');
        console.log('üìù Cambios aplicados:');
        console.log('  - Da√±o escalado por nivel de hechizo');
        console.log('  - UI mejorada con nivel y estimaci√≥n de da√±o');
        console.log('  - Tooltips detallados con hover');
        console.log('  - Da√±o flotante con colores elementales');
    </script>
</body>
</html>
